(function(t){function e(e){for(var n,a,l=e[0],o=e[1],u=e[2],d=0,h=[];d<l.length;d++)a=l[d],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&h.push(r[a][0]),r[a]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);c&&c(e);while(h.length)h.shift()();return s.push.apply(s,u||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],n=!0,l=1;l<i.length;l++){var o=i[l];0!==r[o]&&(n=!1)}n&&(s.splice(e--,1),t=a(a.s=i[0]))}return t}var n={},r={app:0},s=[];function a(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=n,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/pathvis/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var c=o;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[t.showDebugger?i("div",{staticClass:"debug"},[t._v(" startCell: "+t._s(t.startCell)),i("br"),t._v(" endCell: "+t._s(t.endCell)+" "),i("br"),i("br"),i("span",{on:{click:t.dijkstra}},[t._v("Start Dijkstra")]),i("br"),i("br"),i("span",{on:{click:t.init}},[t._v("Reset")]),i("br"),i("br"),i("div",[t._v("Result message: "+t._s(t.resultMessage))])]):t._e(),i("Grid")],1)},s=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"Grid",style:t.styleObject,attrs:{id:"grid"},on:{mousedown:function(e){return e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.handleMouseDown(e)},mouseup:function(e){return e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.handleMouseUp(e)}}},t._l(t.flatGrid,(function(e){return i("GridCell",{key:"Grid__cell__("+e.coordinates+")",attrs:{data:e},on:{shiftClick:function(i){return t.handleCellShiftClick(e)},altClick:function(i){return t.handleCellAltClick(e)}}})})),1)},l=[],o=(i("99af"),i("4160"),i("d3b7"),i("ac1f"),i("1276"),i("159b"),i("96cf"),i("1da1")),u=function(t,e){var i;return function(){var n=arguments,r=this;i||(t.apply(r,n),i=!0,setTimeout((function(){return i=!1}),e))}},c=function(t,e,i){var n;return function(){var r=this,s=arguments,a=function(){n=null,i||t.apply(r,s)},l=i&&!n;clearTimeout(n),n=setTimeout(a,e),l&&t.apply(r,s)}},d=function(t,e,i,n,r,s,a,l){var o=((a-r)*(e-s)-(l-s)*(t-r))/((l-s)*(i-t)-(a-r)*(n-e)),u=((i-t)*(e-s)-(n-e)*(t-r))/((l-s)*(i-t)-(a-r)*(n-e));return o>=0&&o<=1&&u>=0&&u<=1},h=function(t,e,i,n,r,s,a,l){var o=d(t,e,i,n,r,s,r,s+l),u=d(t,e,i,n,r+a,s,r+a,s+l),c=d(t,e,i,n,r,s,r+a,s),h=d(t,e,i,n,r,s+l,r+a,s+l);return!!(o||u||c||h)},f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.computedClass,on:{click:[function(e){return e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.$emit("click")},function(e){return e.shiftKey?e.ctrlKey||e.altKey||e.metaKey?null:t.$emit("shiftClick"):null},function(e){return e.altKey?e.ctrlKey||e.shiftKey||e.metaKey?null:t.$emit("altClick"):null}],mouseover:function(e){return e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.$emit("mouseover")}}},[t.debug?[t.data.distance&&999999!==t.data.distance?[t._v(" "+t._s(t.data.distance)+" "),i("small",[t._v(t._s(t.data.coordinates))])]:t._e(),i("small",[t._v(t._s(t.data.tile))])]:t._e()],2)},g=[],p=(i("a15b"),{props:{data:{default:{}},debug:{type:Boolean,default:!1}},computed:{computedClass:function(){var t=["GridCell"];switch(this.data.tile){case"WALL":t.push("GridCell--wall");break;case"START":t.push("GridCell--start");break;case"END":t.push("GridCell--end");break;case"PATH":t.push("GridCell--path");break}return this.data.unvisited||"NONE"!==this.data.tile||t.push("GridCell--visited"),t.join(" ")}}}),v=p,b=(i("5e3e"),i("2877")),m=Object(b["a"])(v,f,g,!1,null,"091d9c74",null),C=m.exports,w={components:{GridCell:C},data:function(){return{gridWidth:50,gridHeight:40,gridSize:40,actualGridSizeX:0,actualGridSizeY:0,grid:[],startCell:"",endCell:"",mouseDown:!1,mouseDownInitialCellTile:null,previousMousePosition:null,currentMousePosition:null,resultMessage:"",pathDrawSpeed:25,drawing:!1,abortDrawing:!1,calculating:!1,abortCalculating:!1}},computed:{flatGrid:function(){var t=[];return this.grid.forEach((function(e){e.forEach((function(e){t.push(e)}))})),t},styleObject:function(){return{gridTemplateColumns:"repeat(".concat(this.gridWidth,", auto)"),gridTemplateRows:"repeat(".concat(this.gridHeight,", auto)")}}},mounted:function(){this.init(),window.addEventListener("resize",this.handleWindowResize)},destroyed:function(){window.removeEventListener("resize",this.handleWindowResize)},methods:{init:function(){this.calculateGridSize(),this.resetGrid(),this.$nextTick(this.calculateActualGridSize),this.dijkstra()},calculateGridSize:function(){this.gridWidth=Math.floor(window.innerWidth/this.gridSize),this.gridHeight=Math.floor(window.innerHeight/this.gridSize)},resetGrid:function(){for(var t=[],e=0;e<this.gridHeight;e++){for(var i=[],n=0;n<this.gridWidth;n++)i.push({tile:"NONE",coordinates:"".concat(n,",").concat(e),unvisited:!0,distance:999999});t.push(i)}this.grid=t,this.setStartCell(this.getCell(4,Math.floor(this.gridHeight/2))),this.setEndCell(this.getCell(this.gridWidth-5,Math.floor(this.gridHeight/2)))},handleCellShiftClick:function(t){this.calculating&&(this.abortCalculating=!0),this.drawing&&(this.abortDrawing=!0),this.removePath(),""!==this.startCell?(this.resetCell(this.startCell.split(",")),this.startCell===t.coordinates?this.startCell="":this.setStartCell(t)):this.setStartCell(t),setTimeout(this.dijkstra,100)},handleCellAltClick:function(t){this.calculating&&(this.abortCalculating=!0),this.drawing&&(this.abortDrawing=!0),this.removePath(),""!==this.endCell?(this.resetCell(this.endCell.split(",")),this.endCell===t.coordinates?this.endCell="":this.setEndCell(t)):this.setEndCell(t),setTimeout(this.dijkstra,100)},resetCell:function(t){this.getCell(t[0],t[1]).tile="NONE"},setStartCell:function(t){t.tile="START",this.startCell=t.coordinates},setEndCell:function(t){t.tile="END",this.endCell=t.coordinates},handleMouseDown:function(t){this.mouseDown=!0,document.getElementById("grid").addEventListener("mousemove",this.handleMouseMove),this.handleSingleClick(t),this.removePath(),this.drawing&&(this.abortDrawing=!0)},handleMouseUp:function(){this.mouseDown=!1,this.mouseDownInitialCellTile=null,document.getElementById("grid").removeEventListener("mousemove",this.handleMouseMove),this.previousMousePosition=null,this.currentMousePosition=null,this.removePath(),this.drawing?this.abortDrawing=!0:(this.calculating&&(this.abortCalculating=!0),setTimeout(this.dijkstra,100))},setMousePosition:function(t){var e=document.getElementById("grid"),i=e.offsetLeft,n=e.offsetTop,r=t.x||t.clientX,s=t.y||t.clientY;this.previousMousePosition=this.currentMousePosition,this.currentMousePosition={x:r-i,y:s-n}},handleMouseMove:u((function(t){this.setMousePosition(t),this.calculateAffectedCells()}),50),handleWindowResize:c((function(){this.abortCalculating=!0,this.drawing&&(this.abortDrawing=!0),this.calculateActualGridSize(),this.calculateGridSize(),this.resetGrid(),setTimeout(this.dijkstra,100)}),300),calculateActualGridSize:function(){var t=0,e=0,i=document.querySelectorAll(".GridCell"),n=i.length;i.forEach((function(e){t+=e.offsetWidth})),this.actualGridSizeX=t/n,i.forEach((function(t){e+=t.offsetHeight})),this.actualGridSizeY=e/n},calculateAffectedCells:function(){if(null!==this.previousMousePosition)for(var t=this.previousMousePosition.x,e=this.previousMousePosition.y,i=this.currentMousePosition.x,n=this.currentMousePosition.y,r=this.gridSize,s=0,a=0;a<this.gridHeight;a++){s=0;for(var l=0;l<this.gridWidth;l++){var o=s,u=r-this.gridSize,c=h(t,e,i,n,o,u,this.gridSize,this.gridSize);c&&this.setTile(this.grid[a][l],this.mouseDownInitialCellTile),s+=this.gridSize}r+=this.gridSize}},handleSingleClick:function(t){this.setMousePosition(t);var e=this.currentMousePosition.x,i=this.currentMousePosition.y,n=Math.floor(e/this.actualGridSizeX),r=Math.floor(i/this.actualGridSizeY);this.mouseDownInitialCellTile=this.grid[r][n].tile,this.setTile(this.grid[r][n])},getCell:function(t,e){return this.grid[e][t]},setTile:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"START"!==t.tile&&"END"!==t.tile&&(null===e?"NONE"===t.tile?t.tile="WALL":"WALL"===t.tile?t.tile="NONE":"PATH"===t.tile&&(t.tile="WALL"):"NONE"===e?t.tile="WALL":"WALL"===e?t.tile="NONE":"PATH"===e&&(t.tile="WALL"))},dijkstra:function(){var t=this;if(""!==this.startCell){this.calculating=!0,this.removePath();var e=999999,i=[];this.grid.forEach((function(t){var n=[];t.forEach((function(t){var i=Object.assign({},t);i.unvisited="WALL"!==t.tile,i.distance=e,n.push(i)})),i.push(n)}));var n=this.startCell.split(","),r=parseInt(n[0]),s=parseInt(n[1]),a=i[s][r];a.distance=0;var l=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(n,r,s){var a,o,u,c,d,h,f,g,p,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.abortCalculating){e.next=4;break}return t.abortCalculating=!1,t.calculating=!1,e.abrupt("return");case 4:if(a=null,o=null,u=null,c=null,s-1>-1&&(a=i[s-1][r]),r+1<t.gridWidth&&(o=i[s][r+1]),s+1<t.gridHeight&&(u=i[s+1][r]),r-1>-1&&(c=i[s][r-1]),a&&a.unvisited&&(d=n.distance+1,d<a.distance&&(a.distance=d)),o&&o.unvisited&&(h=n.distance+1,h<o.distance&&(o.distance=h)),u&&u.unvisited&&(f=n.distance+1,f<u.distance&&(u.distance=f)),c&&c.unvisited&&(g=n.distance+1,g<c.distance&&(c.distance=g)),n.unvisited=!1,n.coordinates===t.endCell){e.next=32;break}if(p=999999,v=!1,i.forEach((function(t,e){t.forEach((function(t,i){t.unvisited&&t.distance<p&&(v=!0,p=t.distance,n=t,r=i,s=e)}))})),!v){e.next=27;break}return e.next=24,t.sleep(5);case 24:l(n,r,s),e.next=29;break;case 27:t.resultMessage="No path found",t.calculating=!1;case 29:t.$nextTick((function(){t.grid=i})),e.next=35;break;case 32:t.resultMessage="Distance to endCell is ".concat(n.distance),t.calculating=!1,t.$nextTick((function(){t.grid=i,t.calculatePath(i)}));case 35:case"end":return e.stop()}}),e)})));return function(t,i,n){return e.apply(this,arguments)}}();l(a,r,s)}},calculatePath:function(t){var e=this,i=[],n=0,r=this.endCell.split(","),s=t[parseInt(r[1])][parseInt(r[0])],a=function t(r,s){if(n=s.distance,!(n<2)){var a=s.coordinates.split(","),l=parseInt(a[0]),o=parseInt(a[1]),u=null,c=null,d=null,h=null;o-1>-1&&(u=r[o-1][l]),l+1<e.gridWidth&&(c=r[o][l+1]),o+1<e.gridHeight&&(d=r[o+1][l]),l-1>-1&&(h=r[o][l-1]);var f=n;u&&u.distance<f&&"WALL"!==u.tile?(f=u.distance,s=u):c&&c.distance<f&&"WALL"!==c.tile?(f=c.distance,s=c):d&&d.distance<f&&"WALL"!==d.tile?(f=d.distance,s=d):h&&h.distance<f&&"WALL"!==h.tile&&(f=h.distance,s=h),i.push(s),t(r,s)}};a(t,s),i=i.reverse(),this.drawPath(i)},drawPath:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var n,r,s,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:n=e.grid,e.drawing=!0,r=0;case 3:if(!(r<t.length)){i.next=17;break}if(!e.abortDrawing){i.next=8;break}return e.abortDrawing=!1,e.drawing=!1,i.abrupt("break",17);case 8:return s=t[r],a=s.coordinates.split(","),n[a[1]][a[0]].tile="PATH",e.$nextTick((function(){e.grid=n})),i.next=14,e.sleep(e.pathDrawSpeed);case 14:r++,i.next=3;break;case 17:e.abortDrawing=!1,e.drawing=!1;case 19:case"end":return i.stop()}}),i)})))()},removePath:function(){this.grid.forEach((function(t){t.forEach((function(t){t.tile="PATH"===t.tile?"NONE":t.tile}))}))},sleep:function(t){return new Promise((function(e){setTimeout(e,t)}))}}},y=w,k=(i("b061"),Object(b["a"])(y,a,l,!1,null,"dfa95cd8",null)),M=k.exports,S={name:"App",components:{Grid:M},data:function(){return{showDebugger:!1}}},P=S,T=(i("5c0b"),Object(b["a"])(P,r,s,!1,null,null,null)),E=T.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(E)}}).$mount("#app")},"5c0b":function(t,e,i){"use strict";i("9c0c")},"5e3e":function(t,e,i){"use strict";i("877d")},"877d":function(t,e,i){},"9bfb":function(t,e,i){},"9c0c":function(t,e,i){},b061:function(t,e,i){"use strict";i("9bfb")}});
//# sourceMappingURL=app.a4f9aa18.js.map